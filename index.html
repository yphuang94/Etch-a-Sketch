<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch-a-Sketch</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="main-container">
        <div id="grid-container" onmousemove="hover()"></div>
    </div>

    <script>
        var mouseToggle = false;
        let pos = "";

        for (i = 0; i < 16; i++) {
            let new_container = document.getElementById("grid-container").appendChild(document.createElement('div'));
            new_container.classList.add("grid");
        }

        document.addEventListener("mousedown", function (){
            mouseToggle = true;
            let posX = pos.slice(0,3);
            let posY = pos.slice(-3);
            document.elementFromPoint(posX,posY).style.backgroundColor = `#00008B`;
        })
        document.addEventListener("mouseup", function (){
            mouseToggle = false;
        })
        
        document.addEventListener("mousemove", ({pageX, pageY}) => {
            pos = `${pageX},${pageY}`;
        });
        
        function hover() {
            let posX = pos.slice(0,3);
            let posY = pos.slice(-3);
            console.log("invoking function");
            if(mouseToggle == true){
                document.elementFromPoint(posX,posY).style.backgroundColor = `#00008B`;
            }
        }

    </script>

</body>
</html>